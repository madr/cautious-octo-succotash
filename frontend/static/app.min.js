/*! lanfear 2016-11-14 */
!function(a){"use strict";var b,c={};b={listeners:function(){return c},add:function(a,b){void 0===c[a]&&(c[a]=[]),c[a].push(b)},fire:function(a){var b,d,e=0;if("string"==typeof a&&(a={type:a}),a.target||(a.target=this),c[a.type]instanceof Array)for(b=c[a.type],d=b.length;e<d;e+=1)b[e].call(this,a)},remove:function(a,b){var d,e,f=0;if(c[a]instanceof Array)for(d=c[a],e=d.length;f<e;f+=1)if(d[f]===b){d.splice(f,1);break}}},a.tajmme=b}(this),function(a,b){"use strict";var c;if(c=function(a,c,d){var e=this;this.timer="",this.field=b.getElementById(a),this.field.setAttribute("autocomplete","off"),this.fieldX=this.field.offsetWidth,this.fieldY=this.field.offsetHeight,this.values=c,this.callback=d,window.attachEvent?this.field.attachEvent("onkeydown",function(a){e.keydown(a)}):this.field.addEventListener("keydown",function(a){e.keydown(a)},!1),this.field.onblur=function(){e.blur()}},c.prototype.prevDef=function(a){return a.returnValue=!1,void 0!==a.preventDefault&&a.preventDefault(),!0},c.prototype.getPosition=function(a){for(var b=0,c=0;null!==a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return[b,c]},c.prototype.keydown=function(a){void 0===a&&(a=window.event);var c,d,e,f,g,h,i=a.target||a.srcElement,j=this;switch(c=b.getElementById("autoCompleteDropdown"),a.keyCode){case 9:case 16:case 17:case 18:case 20:case 27:case 33:case 34:case 35:case 36:case 37:case 39:break;case 13:c&&(this.blur(),this.prevDef(a));break;case 38:if(null!==c){for(d=c.childNodes,e=!1,f=0,g=d.length;f<g;f+=1)if("autocomplete-hover"===d[f].className){e=!0,f>0&&(d[f].className="",d[f-1].className="autocomplete-hover",i.value=d[f-1].firstChild.nodeValue);break}e||(d[0].className="autocomplete-hover",i.value=d[0].firstChild.nodeValue)}this.prevDef(a);break;case 40:if(null!==c){for(d=c.childNodes,e=!1,f=0,g=d.length;f<g;f+=1)if("autocomplete-hover"===d[f].className){e=!0,f<d.length-1&&(d[f].className="",d[f+1].className="autocomplete-hover",i.value=d[f+1].firstChild.nodeValue);break}e||(d[0].className="autocomplete-hover",i.value=d[0].firstChild.nodeValue)}this.prevDef(a);break;case 8:case 46:void 0!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){j.generate(!1)},500);break;default:void 0!==this.timer&&clearTimeout(this.timer),i=a.target||a.srcElement,h="false",void 0===i.createTextRange&&void 0===i.setSelectionRange||(h="true"),this.timer=setTimeout(function(){j.generate(h)},500)}return!0},c.prototype.assign=function(a){var b=this;a.onmouseover=function(){b.mouseover(this)},a.onmouseout=function(){b.mouseout(this)},a.onmousedown=function(){b.mousedown(this)}},c.prototype.generate=function(a){this.close();var c,d,e,f,g=this.field,h=b.createElement("ul"),i=this.getPosition(g),j=this.values.length;for(h.setAttribute("id","autoCompleteDropdown"),h.className="autocomplete",h.style.position="absolute",h.style.left=i[0]+"px",h.style.top=i[1]+this.fieldY-2+"px",h.style.width=this.fieldX-2+"px",d=0;d<j;d+=1)e=this.values[d],e instanceof Array&&(e=e[0]),e.match(new RegExp("^"+g.value,"i"))&&(c=b.createElement("li"),c.className="autocomplete-suggestion",f=e,c.innerHTML=f,h.appendChild(c),this.assign(c));return null!==h.firstChild&&b.body.appendChild(h),void 0!==a&&a&&this.autoComplete(),!0},c.prototype.autoComplete=function(){var a,c,d,e=this.field,f=!1,g=this;return void 0!==b.selection?(a=b.selection.createRange(),0!==a.move("character",1)&&(f=!0)):void 0!==e.selectionStart&&e.selectionStart<e.value.length&&(f=!0),c=e.value,d=b.getElementById("autoCompleteDropdown"),null===d||f||(d.firstChild.className="autocomplete-hover",e.value=d.firstChild.firstChild.nodeValue,void 0!==e.createTextRange?(a=e.createTextRange(),a.moveStart("character",c.length),a.select()):void 0!==e.setSelectionRange&&e.setSelectionRange(c.length,e.value.length),1===d.childNodes.length&&(setTimeout(function(){g.close()},10),this.callback(e.value))),!0},c.prototype.mouseover=function(a){for(var b,c,d;"LI"!==a.nodeName;)a=a.parentNode;for(b=a.parentNode.childNodes,d=b.length,c=0;c<d;c+=1)b[c].className="";return a.className+=" autocomplete-hover",!0},c.prototype.mouseout=function(a){for(;"LI"!==a.nodeName;)a=a.parentNode;return a.className=a.className.replace(" autocomplete-hover",""),!0},c.prototype.mousedown=function(a){for(;"LI"!==a.nodeName;)a=a.parentNode;return this.field.value=a.firstChild.nodeValue,!0},c.prototype.blur=function(){var a=this;return void 0!==this.timer&&clearTimeout(this.timer),this.callback(this.field.value),setTimeout(function(){a.close()},55),!0},c.prototype.close=function(){var a=b.getElementById("autoCompleteDropdown");return null!==a&&a.parentNode.removeChild(a),!0},void 0===a.tajmme)throw new Error("global object tajmme is missing!");a.tajmme.Autocomplete=c}(this,document),function(a){"use strict";var b,c,d;if(b=function(a,b){d=b,c=a},b.prototype={constructor:b,init:function(){document.getElementById(c).onchange=this.createSubmit(d)},createSubmit:function(a){return function(){document.getElementById(a).submit()}}},void 0===a.tajmme)throw new Error("global object tajmme is missing!");a.tajmme.Autosubmit=b}(this),function(a){"use strict";var b;if(Date.prototype.getWeek=function(){var a,b=new Date(this.getTime());return b.setHours(0,0,0,0),b.setDate(b.getDate()+3-(b.getDay()+6)%7),a=new Date(b.getFullYear(),0,4),1+Math.round(((b.getTime()-a.getTime())/864e5-3+(a.getDay()+6)%7)/7)},b=function(a,b,c,d){var e=a.split("-"),f=parseInt(e[0],10),g=parseInt(e[1],10)-1,h=parseInt(e[2],10);this.currentDate=new Date(f,g,h),this.fields={year:b,week:c,day:d}},b.prototype={constructor:b,increase:function(a){var b=1e3*a*60*60*24,c=new Date(this.currentDate.getTime()+b);this.currentDate=c,this.setFieldValues(this.dateToValues(c))},button:function(a,b){var c=this,d=document.querySelector(a);d.onclick=function(){c.increase(b)}},dateToValues:function(a){var b=a.getDay();return 0===b&&(b=7),{year:a.getFullYear(),week:a.getWeek(),day:b}},setFieldValues:function(a){this.fields.year.value=a.year,this.fields.week.value=a.week,this.fields.day.value=a.day}},void 0===a.tajmme)throw new Error("global object tajmme is missing!");a.tajmme.DateField=b}(this),function(a){"use strict";var b;if(b=function(a){this.tbl=a},b.prototype={constructor:b,clone:function(){return this.tbl.tBodies[0].cloneNode(!0)},replace:function(a){return this.tbl.replaceChild(a,this.tbl.tBodies[0])},update:function(a){var b,c,d,e,f=this.clone();for(void 0===a&&(a=""),b=0,c=f.rows.length;b<c;b+=1)d=f.rows[b],e=a.length>1&&!d.innerHTML.match(new RegExp(a,"i"))?"none":"",d.style.display=e;this.replace(f)},filter:function(a){var b=document.getElementById(a),c=this;b.onkeyup=function(){clearTimeout(c.timer);var a=this;c.timer=setTimeout(function(){c.update(a.value,"filter")},99)},b.value.length&&b.onkeyup()}},void 0===a.tajmme)throw new Error("global object tajmme is missing!");a.tajmme.TableFilter=b}(this),function(a){"use strict";var b,c;if(b=function(a){var b,c,d;if(this.tbl=a,this.lastSortedTh=null,this.tbl&&"TABLE"===this.tbl.nodeName)for(b=this.tbl.tHead.rows[0].cells,d=b.length,c=0;c<d;c+=1)b[c].className.match(/asc|dsc/)&&(this.lastSortedTh=b[c]);return this},b.prototype={constructor:b,makeSortable:function(){var a,b,c,d=this.tbl.tHead.rows[0].cells,e=d.length,f=this;for(c=function(){return f.sortCol(this),!1},a=0;a<e;a+=1)d[a].cIdx=a,b=document.createElement("a"),b.className="a",b.href="#",b.innerHTML=d[a].innerHTML,b.onclick=c,d[a].innerHTML="",d[a].appendChild(b)},sortCol:function(a){var b,d,e,f,g,h,i,j=this.tbl.tBodies[0].rows,k=[],l=[],m=0,n=0,o=a.parentNode,p=o.cIdx,q=j.length,r=[];for(b=0;b<q;b+=1)d=j[b].cells[p],e=d.textContent||d.innerText,f=e.replace(/(\$|\,|\%|\s)/g,""),parseFloat(f,10)==f?(l[n]={value:Number(f),row:j[b]},n+=1):(k[m]={value:e,row:j[b]},m+=1);for(o.className.match(" asc")?(g=c(k,-1),h=c(l,-1),o.className=o.className.replace(/ asc/," dsc")):(g=c(l,1),h=c(k,1),o.className.match("dsc")?o.className=o.className.replace(/ dsc/," asc"):o.className+=" asc"),this.lastSortedTh&&o!==this.lastSortedTh&&(this.lastSortedTh.className=this.lastSortedTh.className.replace(/dsc|asc/g,"")),this.lastSortedTh=o,r=g.concat(h),i=this.tbl.tBodies[0],b=0,q=r.length;b<q;b+=1)i.appendChild(r[b].row)}},c=function(a,b){var c,d,e,f,g,h,i;for(1===b?(c=0,d=a.length):b===-1&&(c=a.length-1,d=-1),i=!0;i;)for(i=!1,h=c;h!==d;h+=b)a[h+b]&&a[h].value>a[h+b].value&&(e=a[h],f=a[h+b],g=e,a[h]=f,a[h+b]=g,i=!0);return a},void 0===a.tajmme)throw new Error("global object tajmme is missing!");a.tajmme.TableSort=b}(this),function(a){"use strict";var b,c=/(\d+)\s?[h|m]/gi,d=/^(\d+):(\d+)$/i;if(b=function(a){var b=this;"string"==typeof a?this.field=document.querySelector(a):this.field=a,this.field.onblur=function(){if(""!==b.field.value){var a=b.toMinutes(b.field.value);b.field.value=b.correct(a)}}},b.prototype={constructor:b,toMinutes:function(a){var b,e,f,g=0;if(b=a.match(d))return 0!==parseInt(b[1],10)&&(g+=60*parseInt(b[1],10)),0!==parseInt(b[2],10)&&(g+=parseInt(b[2],10)),parseInt(g,10);if(b=a.match(c)){for(e=b.length;e;)e-=1,f=b[e],g+=f.match(/h/)?60*parseInt(f,10):parseInt(f,10);return parseInt(g,10)}return g=parseInt(f,10),g<9&&(g=60*g),g},increase:function(a){var b,c;b=this.toMinutes(this.field.value),c=b?b+a:a,this.field.value=this.correct(c)},correct:function(a){var b,c;return(a===!0||a===!1||isNaN(a))&&(a=15),a<0||0===a?"00:00":(a=parseInt(a,10),a%15&&(a+=15-a%15),b=(a-a%60)/60,c=a-60*b,b<10&&(b="0"+b),c<10&&(c="0"+c),b+":"+c)},button:function(a,b){var c=this,d=document.querySelector(a);d.onclick=function(){c.increase(b)}}},void 0===a.tajmme)throw new Error("global object tajmme is missing!");a.tajmme.TimeSpent=b}(this),function(a){"use strict";var b=function(a){var b,c,d;if(a.nodeName)this.install(a),d=[a];else for(d=document.querySelectorAll(a),b=0,c=d.length;b<c;b+=1)this.install(d[b]);this.elms=d};if(b.prototype={constructor:b,install:function(a){var b=this;a.onclick=function(){b.toggle(a)}},toggle:function(a){var b=a.getAttribute("title");a.setAttribute("title",a.innerHTML),a.innerHTML=b}},void 0===a.tajmme)throw new Error("global object tajmme is missing!");a.tajmme.ToggableTitle=b}(this),function(a){"use strict";a.tajmme.add("datefield:init",function(){var b;b=new a.tajmme.DateField(document.getElementById("id_done_at").value,document.getElementById("id_done_at_year"),document.getElementById("id_done_at_week"),document.getElementById("id_done_at_day")),b.button("plus-1-week",7),b.button("plus-1-day",1),b.button("minus-1-week",-7),b.button("minus-1-day",-1)}),a.tajmme.add("limit:init",function(){var b=new a.tajmme.Autosubmit("id_limit","limit");b.init()}),a.tajmme.add("vendor:awesomplete:init",function(){var a=new XMLHttpRequest;a.open("GET","/reporter/projects.js",!0),a.onload=function(){var b=JSON.parse(a.responseText).map(function(a){return a});new Awesomplete(document.querySelector("[data-project-autocomplete]"),{list:b})},a.send()}),a.tajmme.add("progressform:init",function(){var b;b=new a.tajmme.TimeSpent("#id_duration"),b.button("[data-plus-15-min]",15),b.button("[data-plus-1-hour]",60),b.button("[data-minus-15-min]",-15),b.button("[data-minus-1-hour]",-60)}),a.tajmme.add("projectfilter:init",function(){var b=new a.tajmme.TableFilter(document.getElementById("projects"));b.filter("id_filter")}),a.tajmme.add("tablesort:init",function(){var b,c,d,e;for(b=document.getElementsByTagName("table"),c=b.length,d=0;d<c;d+=1)b[d].classList.contains("no-sort")||(e=new a.tajmme.TableSort(b[d]),e.makeSortable())}),a.tajmme.add("toggabletitles:init",function(){var b=new a.tajmme.ToggableTitle("[data-tt]");return b}),a.tajmme.add("userfilter:init",function(){var b=new a.tajmme.TableFilter(document.getElementById("users"));b.filter("id_filter")}),a.tajmme.add("init",function(){a.tajmme.fire("tablesort:init")})}(this);