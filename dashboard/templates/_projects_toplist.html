{% load i18n %}
{% load tajmutils %}

<div class="table-responsive">
    <table class="table table-hover">
        <thead>
        <tr>
            <th class="col-50">{% trans 'DB' %}</th>
            <th class="col-50">{% trans 'Projekt' %}</th>
            <th class="col-25">{% trans 'Tid' %}</th>
            <th class="col-25">{% trans 'Rader' %}</th>
        </tr>
        </thead>
        <tbody>
        {% for p in projects %}
            <tr>
                <td class="text-right">{% if p.billable %}
                    <span class="label label-success">db</span>
                {% else %}
                    <span class="label label-danger">it</span>
                {% endif %}</td>
                <td>{{ p.name }}</td>
                <td>
                    {{ p.sum|pretty_minutes }}<br>
                    {% if max_sum %}
                        {% if p.billable == False %}
                            {% include 'charts/bar.html' with bar_max=max_sum bar_value=p.sum color='nonbillable' only %}
                        {% else %}
                            {% include 'charts/bar.html' with bar_max=max_sum bar_value=p.sum color='progress' only %}
                        {% endif %}
                    {% endif %}
                </td>
                <td>
                    {{ p.count }}<br>
                    {% if max_count %}
                        {% if p.billable == False %}
                            {% include 'charts/bar.html' with bar_max=max_count bar_value=p.count color='nonbillable' only %}
                        {% else %}
                            {% include 'charts/bar.html' with bar_max=max_count bar_value=p.count color='progress' only %}
                        {% endif %}
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>